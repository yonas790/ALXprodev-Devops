#!/bin/bash
SCRIPT_PATH="$0"
if [ ! -s "$SCRIPT_PATH" ]; then
  echo "Error: Script file '$SCRIPT_PATH' does not exist or is empty."
  exit 1
fi

URL="https://pokeapi.co/api/v2/pokemon/pikachu"
OUTPUT_FILE="data.json"
ERROR_FILE="errors.txt"

HTTP_STATUS=$(curl -s -w "%{http_code}" "$URL" -o "$OUTPUT_FILE")

if [ "$HTTP_STATUS" -ne 200 ]; then
  echo "$(date) - Failed with status code $HTTP_STATUS" >> "$ERROR_FILE"
  rm -f "$OUTPUT_FILE"
else
  echo "API data saved to $OUTPUT_FILE"
fi
